!function(){"use strict";function e(){const e=document.getElementById("time");let t=(new Date).toLocaleTimeString().slice(0,-3);e.innerText=t}function t(){return(new Date).toLocaleDateString()}const n="list-todo";function d(){document.getElementById("modal").classList.remove("hidden");document.getElementById("update").classList.add("hidden");document.getElementById("confirm").classList.remove("hidden"),$()}function o(){d();const e=document.getElementById("confirm"),t=document.getElementById("update");e.classList.add("hidden"),t.classList.remove("hidden"),t.addEventListener("click",T)}function i(){document.getElementById("modal").classList.add("hidden"),document.getElementById("title").value="",document.getElementById("description").value="",document.getElementById("title-select").textContent="Choose a user"}function c(e,t){document.getElementById("warning").classList.remove("hidden"),document.getElementById("text").innerHTML=e;document.getElementById("warning-confirm").addEventListener("click",t,{once:!0})}function l(){document.getElementById("warning").classList.add("hidden")}function s(){const e=JSON.parse(localStorage.getItem(n));if(e){let t=0;return e.forEach((e=>{e.progress||e.done||t++})),document.getElementById("count-todos").innerHTML=t,t}}function a(){const e=JSON.parse(localStorage.getItem(n));if(e){let t=0;return e.forEach((e=>{e.progress&&!e.done&&t++})),document.getElementById("count-progress").innerHTML=t,t}}function r(){const e=JSON.parse(localStorage.getItem(n));if(e){let t=0;return e.forEach((e=>{e.progress&&e.done&&t++})),document.getElementById("count-done").innerHTML=t,t}}function m(){s(),a();const e=JSON.parse(localStorage.getItem(n));if(e){document.getElementById("list-todo").innerHTML="",e.forEach((e=>{var t,n,d,o,i;e.progress||(t=e.id,n=e.title,d=e.description,o=e.user,i=e.time,document.getElementById("list-todo").insertAdjacentHTML("beforeEnd",`<div class="card card-todo" draggable="true" id="${t}">\n                <div class="card-todo__header">\n                    <h3 class="title">${n}</h3>\n                    <div class="icon-bg">\n                        <i id="edit-${t}" class="fa-solid fa-pen btn-icon"></i>\n                    </div>\n                </div>\n                <div class="text">\n                    <p>${d}</p>\n                </div>\n                <div class="date">${i}</div>\n                <div class="user">${o}</div>\n                <div class="buttons">\n                    <span>\n                        <i id="delete-${t}" class="fa-solid fa-trash btn-icon"></i>\n                    </span>\n                    <span>\n                        <i id="move-${t}" class="fa-solid fa-file-export btn-icon"></i>\n                    </span>\n                </div>\n        </div>`))}))}}function u(){s(),a(),r();const e=JSON.parse(localStorage.getItem(n));if(e){document.getElementById("list-progress").innerHTML="",e.forEach((e=>{var t,n,d,o,i;e.progress&&!e.done&&(t=e.id,n=e.title,d=e.description,o=e.user,i=e.time,document.getElementById("list-progress").insertAdjacentHTML("beforeEnd",`<div class="card card-todo" draggable="true" id="${t}">\n                <h3 class="title">${n}</h3>\n                <div class="text">\n                    <p>${d}</p>\n                </div>\n                <div class="date">${i}</div>\n                <div class="user">${o}</div>\n                <div class="buttons">\n                    <span>\n                        <i id="back-${t}" class="fa-solid fa-file-export btn-icon back"></i>\n                    </span>\n                    <span>\n                        <i id="complete-${t}" class="fa-solid fa-check-to-slot btn-icon"></i>\n                    </span>\n                </div> \n        </div>`))}))}}function g(){s(),a(),r();const e=JSON.parse(localStorage.getItem(n));if(e){document.getElementById("list-done").innerHTML="",e.forEach((e=>{var t,n,d,o,i;e.done&&e.progress&&(t=e.id,n=e.title,d=e.description,o=e.user,i=e.time,document.getElementById("list-done").insertAdjacentHTML("beforeEnd",`<div class="card card-todo" draggable="true" id="${t}">\n            <h3 class="title">${n}</h3>\n            <div class="text">\n                <p>${d}</p>\n            </div>\n            <div class="date">${i}</div>\n            <div class="user">${o}</div>\n            <div class="buttons">\n                <span>\n                    <i id="delete-${t}" class="fa-solid fa-trash btn-icon"></i>\n                </span>\n            </div>\n        </div>`))}))}}let f;const p=document.querySelectorAll(".list");let v;function E(e){e.addEventListener("dragstart",I),e.addEventListener("dragend",y)}document.querySelectorAll(".card").forEach((e=>{E(e)}));for(const e of p)e.addEventListener("dragover",h),e.addEventListener("dragenter",S),e.addEventListener("dragleave",B),e.addEventListener("drop",L);function I(e){f=this,setTimeout((()=>this.className="invisible"),0)}function y(){setTimeout((()=>this.className="card card-todo"),0)}function h(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}function S(e){e.preventDefault()}function B(){}function L(){let e=JSON.parse(localStorage.getItem(n)).map((e=>f.id==e.id?("list-progress"===this.id&&(e.progress=!0,e.done=!1),"list-done"===this.id&&(e.progress=!0,e.done=!0),"list-todo"===this.id&&(e.progress=!1,e.done=!1),e):e));localStorage.setItem(n,JSON.stringify(e)),m(),u(),g(),document.querySelectorAll(".card").forEach((e=>{E(e)}))}async function $(){let e=document.getElementById("select");return await(t="https://jsonplaceholder.typicode.com/users",fetch(t,{method:"GET",headers:{"Content-Type":"application/json; charset=UTF-8"}}).then((e=>{if(e.ok)return e.json();throw new Error("Wrong url")}))).then((t=>{t.forEach((t=>{let n=document.createElement("li");n.value=t.name,n.innerHTML=t.name,e.appendChild(n)}))}));var t}function b(e){localStorage.setItem(n,JSON.stringify(e))}function N(){return(new Date).toLocaleTimeString().slice(0,-3)}function T(){const e=document.getElementById("title").value,d=document.getElementById("description").value,o=document.getElementById("title-select").textContent;b(JSON.parse(localStorage.getItem(n)).map((n=>v==n.id?(n.title=e,n.description=d,n.time=`update ${t()} ${N()}`,n.user=o,n):n))),document.getElementById("title").value="",document.getElementById("description").value="",document.getElementById("title-select").textContent="Choose a user",i(),m();let c=document.querySelectorAll(".card");console.log(c),c.forEach((e=>{E(e)}))}function O(){const e=JSON.parse(localStorage.getItem(n)),t=e.findIndex((e=>e.id===v));-1!==t&&e.splice(t,1),b(e),i(),m(),g()}m(),u(),g(),window.onload=function(){e(),setInterval(e,1e3)};document.getElementById("addTodo").addEventListener("click",d);document.getElementById("cancel").addEventListener("click",i);document.getElementById("confirm").addEventListener("click",(function(){const e=document.getElementById("title").value,d=document.getElementById("description").value,o=document.getElementById("title-select").textContent,c=JSON.parse(localStorage.getItem(n)),l={id:(new Date).valueOf(),title:e,description:d,user:o,time:`${t()} ${N()}`,progress:!1,done:!1};b(c?[...c,l]:[l]),document.getElementById("title").value="",document.getElementById("description").value="",document.getElementById("title-select").textContent="Choose a user",i(),m(),document.querySelectorAll(".card").forEach((e=>{E(e)}))}));document.getElementById("list-todo").addEventListener("click",(function(e){const t=e.target;JSON.parse(localStorage.getItem(n)).forEach((e=>{t.id==`edit-${e.id}`?$().then((()=>{o();const t=document.getElementById("title"),n=document.getElementById("description");document.getElementById("title-select").textContent=e.user,t.value=e.title,n.value=e.description,v=e.id})):t.id==`delete-${e.id}`?(v=e.id,O()):t.id==`move-${e.id}`&&(v=e.id,function(){let e=JSON.parse(localStorage.getItem(n)).map((e=>{if(v==e.id){return a()<3?e.progress=!0:c("First you need to complete the current one before adding another one.",(()=>{!function(){let e=JSON.parse(localStorage.getItem(n)).map((e=>v==e.id?(e.progress=!0,e):e));b(e),m(),u(),l()}()})),e}return e}));b(e),m(),u()}())}))}));document.getElementById("list-progress").addEventListener("click",(function(e){const t=e.target;JSON.parse(localStorage.getItem(n)).forEach((e=>{t.id==`back-${e.id}`?(v=e.id,function(){let e=JSON.parse(localStorage.getItem(n)).map((e=>v==e.id?(e.progress=!1,e):e));b(e),m(),u(),g()}()):t.id==`complete-${e.id}`&&(v=e.id,function(){let e=JSON.parse(localStorage.getItem(n)).map((e=>v==e.id?(e.done=!0,e):e));b(e),m(),u(),g()}())}))}));document.getElementById("list-done").addEventListener("click",(function(e){const t=e.target;JSON.parse(localStorage.getItem(n)).forEach((e=>{t.id==`delete-${e.id}`&&(v=e.id,O())}))}));document.getElementById("delete-all").addEventListener("click",(function(){c("Are you sure you want to delete everything?",(()=>{b(JSON.parse(localStorage.getItem(n)).filter((e=>{if(!e.done)return e}))),m(),u(),g(),l()}))}));document.getElementById("warning-cancel").addEventListener("click",l),document.querySelectorAll(".card").forEach((e=>{E(e)}));new function(e){let t=e.elem;t.onclick=function(e){"title-select"==e.target.className?n?o():(t.classList.add("open"),document.addEventListener("click",d),n=!0):"LI"==e.target.tagName&&(!function(e,n){t.querySelector(".title-select").innerHTML=e;const d=new CustomEvent("select",{bubbles:!0,detail:{title:e,value:n}});t.dispatchEvent(d)}(e.target.innerHTML,e.target.dataset.value),o())};let n=!1;function d(e){t.contains(e.target)||o()}function o(){t.classList.remove("open"),document.removeEventListener("click",d),n=!1}}({elem:document.getElementById("animal-select")});document.addEventListener("select",(function(e){document.getElementById("result").innerHTML=e.detail.value}))}();
//# sourceMappingURL=index.eb1a5d86.js.map
