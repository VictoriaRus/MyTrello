function e(){const e=document.getElementById("time");let t=(new Date).toLocaleTimeString().slice(0,-3);e.innerText=t}function t(){return(new Date).toLocaleDateString()}function n(){document.getElementById("modal").classList.remove("hidden");document.getElementById("update").classList.add("hidden");document.getElementById("confirm").classList.remove("hidden"),L()}function o(){n();const e=document.getElementById("confirm"),t=document.getElementById("update");e.classList.add("hidden"),t.classList.remove("hidden"),t.addEventListener("click",N)}function d(){document.getElementById("modal").classList.add("hidden"),document.getElementById("title").value="",document.getElementById("description").value="",document.getElementById("title-select").textContent="Choose a user"}function i(e,t){document.getElementById("warning").classList.remove("hidden"),document.getElementById("text").innerHTML=e;document.getElementById("warning-confirm").addEventListener("click",t,{once:!0})}function l(){document.getElementById("warning").classList.add("hidden")}function s(){const e=JSON.parse(localStorage.getItem("list-todo"));if(e){let t=0;return e.forEach((e=>{e.progress||e.done||t++})),document.getElementById("count-todos").innerHTML=t,t}}function c(){const e=JSON.parse(localStorage.getItem("list-todo"));if(e){let t=0;return e.forEach((e=>{e.progress&&!e.done&&t++})),document.getElementById("count-progress").innerHTML=t,t}}function a(){const e=JSON.parse(localStorage.getItem("list-todo"));if(e){let t=0;return e.forEach((e=>{e.progress&&e.done&&t++})),document.getElementById("count-done").innerHTML=t,t}}function r(){s(),c();const e=JSON.parse(localStorage.getItem("list-todo"));if(e){document.getElementById("list-todo").innerHTML="",e.forEach((e=>{var t,n,o,d,i;e.progress||(t=e.id,n=e.title,o=e.description,d=e.user,i=e.time,document.getElementById("list-todo").insertAdjacentHTML("beforeEnd",`<div class="card card-todo" draggable="true" id="${t}">\n                <div class="card-todo__header">\n                    <h3 class="title">${n}</h3>\n                    <div class="icon-bg">\n                        <i id="edit-${t}" class="fa-solid fa-pen btn-icon"></i>\n                    </div>\n                </div>\n                <div class="text">\n                    <p>${o}</p>\n                </div>\n                <div class="date">${i}</div>\n                <div class="user">${d}</div>\n                <div class="buttons">\n                    <span>\n                        <i id="delete-${t}" class="fa-solid fa-trash btn-icon"></i>\n                    </span>\n                    <span>\n                        <i id="move-${t}" class="fa-solid fa-file-export btn-icon"></i>\n                    </span>\n                </div>\n        </div>`))}))}}function m(){s(),c(),a();const e=JSON.parse(localStorage.getItem("list-todo"));if(e){document.getElementById("list-progress").innerHTML="",e.forEach((e=>{var t,n,o,d,i;e.progress&&!e.done&&(t=e.id,n=e.title,o=e.description,d=e.user,i=e.time,document.getElementById("list-progress").insertAdjacentHTML("beforeEnd",`<div class="card card-todo" draggable="true" id="${t}">\n                <h3 class="title">${n}</h3>\n                <div class="text">\n                    <p>${o}</p>\n                </div>\n                <div class="date">${i}</div>\n                <div class="user">${d}</div>\n                <div class="buttons">\n                    <span>\n                        <i id="back-${t}" class="fa-solid fa-file-export btn-icon back"></i>\n                    </span>\n                    <span>\n                        <i id="complete-${t}" class="fa-solid fa-check-to-slot btn-icon"></i>\n                    </span>\n                </div> \n        </div>`))}))}}function u(){s(),c(),a();const e=JSON.parse(localStorage.getItem("list-todo"));if(e){document.getElementById("list-done").innerHTML="",e.forEach((e=>{var t,n,o,d,i;e.done&&e.progress&&(t=e.id,n=e.title,o=e.description,d=e.user,i=e.time,document.getElementById("list-done").insertAdjacentHTML("beforeEnd",`<div class="card card-todo" draggable="true" id="${t}">\n            <h3 class="title">${n}</h3>\n            <div class="text">\n                <p>${o}</p>\n            </div>\n            <div class="date">${i}</div>\n            <div class="user">${d}</div>\n            <div class="buttons">\n                <span>\n                    <i id="delete-${t}" class="fa-solid fa-trash btn-icon"></i>\n                </span>\n            </div>\n        </div>`))}))}}let g;const f=document.querySelectorAll(".list");let p;function v(e){e.addEventListener("dragstart",E),e.addEventListener("dragend",I)}document.querySelectorAll(".card").forEach((e=>{v(e)}));for(const e of f)e.addEventListener("dragover",y),e.addEventListener("dragenter",h),e.addEventListener("dragleave",S),e.addEventListener("drop",B);function E(e){g=this,setTimeout((()=>this.className="invisible"),0)}function I(){setTimeout((()=>this.className="card card-todo"),0)}function y(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}function h(e){e.preventDefault()}function S(){}function B(){let e=JSON.parse(localStorage.getItem("list-todo")).map((e=>g.id==e.id?("list-progress"===this.id&&(e.progress=!0,e.done=!1),"list-done"===this.id&&(e.progress=!0,e.done=!0),"list-todo"===this.id&&(e.progress=!1,e.done=!1),e):e));localStorage.setItem("list-todo",JSON.stringify(e)),r(),m(),u(),document.querySelectorAll(".card").forEach((e=>{v(e)}))}async function L(){let e=document.getElementById("select");return await(t="https://jsonplaceholder.typicode.com/users",fetch(t,{method:"GET",headers:{"Content-Type":"application/json; charset=UTF-8"}}).then((e=>{if(e.ok)return e.json();throw new Error("Wrong url")}))).then((t=>{t.forEach((t=>{let n=document.createElement("li");n.value=t.name,n.innerHTML=t.name,e.appendChild(n)}))}));var t}function $(e){localStorage.setItem("list-todo",JSON.stringify(e))}function b(){return(new Date).toLocaleTimeString().slice(0,-3)}function N(){const e=document.getElementById("title").value,n=document.getElementById("description").value,o=document.getElementById("title-select").textContent;$(JSON.parse(localStorage.getItem("list-todo")).map((d=>p==d.id?(d.title=e,d.description=n,d.time=`update ${t()} ${b()}`,d.user=o,d):d))),document.getElementById("title").value="",document.getElementById("description").value="",document.getElementById("title-select").textContent="Choose a user",d(),r();let i=document.querySelectorAll(".card");console.log(i),i.forEach((e=>{v(e)}))}function T(){const e=JSON.parse(localStorage.getItem("list-todo")),t=e.findIndex((e=>e.id===p));-1!==t&&e.splice(t,1),$(e),d(),r(),u()}r(),m(),u(),window.onload=function(){e(),setInterval(e,1e3)};document.getElementById("addTodo").addEventListener("click",n);document.getElementById("cancel").addEventListener("click",d);document.getElementById("confirm").addEventListener("click",(function(){const e=document.getElementById("title").value,n=document.getElementById("description").value,o=document.getElementById("title-select").textContent,i=JSON.parse(localStorage.getItem("list-todo")),l={id:(new Date).valueOf(),title:e,description:n,user:o,time:`${t()} ${b()}`,progress:!1,done:!1};$(i?[...i,l]:[l]),document.getElementById("title").value="",document.getElementById("description").value="",document.getElementById("title-select").textContent="Choose a user",d(),r(),document.querySelectorAll(".card").forEach((e=>{v(e)}))}));document.getElementById("list-todo").addEventListener("click",(function(e){const t=e.target;JSON.parse(localStorage.getItem("list-todo")).forEach((e=>{t.id==`edit-${e.id}`?L().then((()=>{o();const t=document.getElementById("title"),n=document.getElementById("description");document.getElementById("title-select").textContent=e.user,t.value=e.title,n.value=e.description,p=e.id})):t.id==`delete-${e.id}`?(p=e.id,T()):t.id==`move-${e.id}`&&(p=e.id,function(){let e=JSON.parse(localStorage.getItem("list-todo")).map((e=>{if(p==e.id){return c()<3?e.progress=!0:i("First you need to complete the current one before adding another one.",(()=>{!function(){let e=JSON.parse(localStorage.getItem("list-todo")).map((e=>p==e.id?(e.progress=!0,e):e));$(e),r(),m(),l()}()})),e}return e}));$(e),r(),m()}())}))}));document.getElementById("list-progress").addEventListener("click",(function(e){const t=e.target;JSON.parse(localStorage.getItem("list-todo")).forEach((e=>{t.id==`back-${e.id}`?(p=e.id,function(){let e=JSON.parse(localStorage.getItem("list-todo")).map((e=>p==e.id?(e.progress=!1,e):e));$(e),r(),m(),u()}()):t.id==`complete-${e.id}`&&(p=e.id,function(){let e=JSON.parse(localStorage.getItem("list-todo")).map((e=>p==e.id?(e.done=!0,e):e));$(e),r(),m(),u()}())}))}));document.getElementById("list-done").addEventListener("click",(function(e){const t=e.target;JSON.parse(localStorage.getItem("list-todo")).forEach((e=>{t.id==`delete-${e.id}`&&(p=e.id,T())}))}));document.getElementById("delete-all").addEventListener("click",(function(){i("Are you sure you want to delete everything?",(()=>{$(JSON.parse(localStorage.getItem("list-todo")).filter((e=>{if(!e.done)return e}))),r(),m(),u(),l()}))}));document.getElementById("warning-cancel").addEventListener("click",l),document.querySelectorAll(".card").forEach((e=>{v(e)}));new function(e){let t=e.elem;t.onclick=function(e){"title-select"==e.target.className?n?d():(t.classList.add("open"),document.addEventListener("click",o),n=!0):"LI"==e.target.tagName&&(!function(e,n){t.querySelector(".title-select").innerHTML=e;const o=new CustomEvent("select",{bubbles:!0,detail:{title:e,value:n}});t.dispatchEvent(o)}(e.target.innerHTML,e.target.dataset.value),d())};let n=!1;function o(e){t.contains(e.target)||d()}function d(){t.classList.remove("open"),document.removeEventListener("click",o),n=!1}}({elem:document.getElementById("animal-select")});document.addEventListener("select",(function(e){document.getElementById("result").innerHTML=e.detail.value}));
//# sourceMappingURL=index.2c19a695.js.map
